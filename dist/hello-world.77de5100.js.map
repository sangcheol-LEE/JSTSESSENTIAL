{"version":3,"sources":["index.ts"],"names":[],"mappings":"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","file":"hello-world.77de5100.js","sourceRoot":"..","sourcesContent":["import { Store, NewsFeed, NewsDetail, NewsComment } from \"./Types\";\n\nlet ajax: XMLHttpRequest = new XMLHttpRequest();\nconst ROOT: HTMLElement | null = document.getElementById(\"root\");\nconst content = document.createElement(\"div\");\n\nconst NEWS_URL: string = \"https://api.hnpwa.com/v0/news/1.json\";\nconst CONTENT_URL: string = `https://api.hnpwa.com/v0/item/@hash.json`;\n\nconst store: Store = {\n  currentPage: 1,\n  feeds: [],\n};\n\nconst getData = <AjaxResponse>(URL: string): AjaxResponse => {\n  ajax.open(\"GET\", URL, false);\n  ajax.send();\n  return JSON.parse(ajax.response);\n};\n\n// class\nclass Api {\n  url: string;\n  ajax: XMLHttpRequest;\n  constructor(url: string) {\n    this.url = url;\n    this.ajax = new XMLHttpRequest();\n  }\n}\n\nconst makeFeed = (feeds: NewsFeed[]) => {\n  const newFeed = [...feeds].map((item) => {\n    item.isRead = false;\n    return item;\n  });\n  return newFeed;\n};\n\nconst updateView = (html: string): void => {\n  if (ROOT) {\n    ROOT.innerHTML = html;\n  } else {\n    console.error(\"최상위 컨테이너가 없어 UI작업을 진행하지 못합니다.\");\n  }\n};\n\nconst getNewsFeed = (): void => {\n  let newsFeed: NewsFeed[] = store.feeds;\n  const news_list = [];\n\n  let template: string = `\n      <div class=\"bg-gray-600 min-h-screen\">\n         <div class=\"bg-white text-xl\">\n            <div class=\"mx-auto px-4\">\n               <div class=\"flex justify-between items-center py-6\">\n                  <div class=\"flex justify-start\">\n                     <h1 class=\"font-extrabold\">Ian's Post</h1>\n                  </div>\n                  <div class=\"items-center justify-end\">\n                     <a href=\"#/page/{{__prev_page__}}\" class=\"test-gray-500\">\n                        Previous\n                     </a>\n                     <a href=\"#/page/{{__next_page__}}\" class=\"test-gray-500 ml-4\">\n                        Next\n                     </a>\n                  </div>\n               </div>\n            </div>\n         </div>\n         <div class=\"p-4 text-2xl text-gray-700\">\n            {{__news_feed__}}\n         </div>\n      </div>\n   `;\n\n  if (newsFeed.length === 0) {\n    newsFeed = store.feeds = makeFeed(getData<NewsFeed[]>(NEWS_URL));\n  }\n\n  for (let i = (store.currentPage - 1) * 10; i < store.currentPage * 10; i++) {\n    news_list.push(`\n         <div class=\"p-6 ${\n           newsFeed[i].isRead ? \"bg-slate-400\" : \"bg-white\"\n         } mt-6 rounded-lg shadow-md transition-colors duration-500 hover:bg-green-100\">\n            <div class=\"flex\">\n               <div class=\"flex-auto\">\n                  <a href=\"#/show/${newsFeed[i].id}\">${newsFeed[i].title}</a>\n               </div>\n               <div class=\"text-center text-sm\">\n                  <div class=\"w-10 text-white bg-green-300 rounded-lg px-0 py-2\">${\n                    newsFeed[i].comments_count\n                  }</div>\n               </div>\n            </div>\n            <div class=\"flex mt-3\">\n               <div class=\"grid grid-cols-3 text-sm text-gray-500\">\n                  <div><i class=\"fas fa-user mr-1\"></i>${newsFeed[i].user}</div>\n                  <div><i class=\"fas fa-heart mr-1\"></i>${\n                    newsFeed[i].points\n                  }</div>\n                  <div><i class=\"fas fa-clock mr-1\"></i>${\n                    newsFeed[i].time_ago\n                  }</div>\n               </div>\n            </div>\n         </div>\n      `);\n  }\n\n  const minPage: number = store.currentPage > 1 ? store.currentPage - 1 : 1;\n  const maxPage: number =\n    store.currentPage * 10 === newsFeed.length\n      ? (store.currentPage * 10) / 10\n      : store.currentPage + 1;\n  const ret: string = news_list.join(\"\");\n\n  template = template.replace(\"{{__news_feed__}}\", ret);\n  template = template.replace(\"{{__prev_page__}}\", String(minPage));\n  template = template.replace(\"{{__next_page__}}\", String(maxPage));\n\n  updateView(template);\n};\n\nconst newsDetail = () => {\n  const hash = location.hash.substring(7); //id\n  const getUrl = CONTENT_URL.replace(\"@hash\", hash);\n  const newsContent = getData<NewsDetail>(getUrl);\n  let template = `\n      <div class=\"bg-gray-600 min-h-screen pb-8\">\n         <div class=\"bg-white text-xl\">\n            <div class=\"mx-auto px-4\">\n               <div class=\"flex justify-between items-center py-6\">\n                  <div class=\"flex justify-start\">\n                     <h1 class=\"font-extrabold\">Ians' Post</h1>\n                  </div>\n                  <div class=\"items-center justify-end\">\n                     <a href=\"#/page/${store.currentPage}\" class=\"text-gray-500\">\n                        <i class=\"fa fa-times\"></i>\n                     </a>\n                  </div>\n               </div>\n            </div>\n         </div>\n         <div class=\"h-full border rounded-xl bg-white m-6 p-4\">\n            <h2 class=\"font-bold text-3xl\">${newsContent.title}</h2>\n            <div class=\"text-gray-400 h-20\">\n               ${newsContent.content}\n            </div>\n            {{__comments__}}\n         </div>\n      </div>\n   `;\n\n  for (let i = 0; i < store.feeds.length; i++) {\n    console.log(store.feeds[i].id);\n    console.log(\"hash\", hash);\n    if (store.feeds[i].id === Number(hash)) {\n      store.feeds[i].isRead = true;\n      break;\n    }\n  }\n\n  const makeComment = (comments: NewsComment[]): string => {\n    const commentString = [];\n\n    for (let i = 0; i < comments.length; i++) {\n      const comment: NewsComment = comments[i];\n      commentString.push(`\n            <div style=\"padding-left: ${comment.level * 40}px;\" class=\"mt-4\">\n               <div class=\"text-gray-400\">\n                  <i class=\"\"fa fa-sort-up mr-2></i>\n                  <strong>${comment.user}</strong> ${comment.time_ago}\n               </div>\n               <p class=\"text-gray-700\">${comment.content}</p>\n            </div>\n         `);\n\n      if (comment.comments.length > 0) {\n        commentString.push(makeComment(comment.comments));\n      }\n    }\n\n    return commentString.join(\"\");\n  };\n  updateView(template);\n};\n\nconst router = () => {\n  const routePath = location?.hash;\n  console.log(\"good\", routePath.substring(7));\n  if (routePath === \"\") {\n    getNewsFeed();\n  } else if (routePath.indexOf(\"#/page/\") >= 0) {\n    store.currentPage = parseInt(routePath.substring(7));\n    getNewsFeed();\n  } else {\n    newsDetail();\n  }\n};\n\nwindow.addEventListener(\"hashchange\", router);\n\nrouter();\n"]}